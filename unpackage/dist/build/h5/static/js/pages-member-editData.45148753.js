(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-member-editData"],{3423:function(t,e,i){"use strict";i.r(e);var a=i("760e"),n=i("8311");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("4566");var d,o=i("f0c5"),r=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"d2e8d1ac",null,!1,a["a"],d);e["default"]=r.exports},"426a":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,"uni-page-body[data-v-d2e8d1ac]{background:#f6f7f9}.edit-top[data-v-d2e8d1ac]{position:relative}.edit-top .bg-edit[data-v-d2e8d1ac]{width:100%;height:%?360?%;background:-webkit-linear-gradient(314deg,#99d337,#83b928);background:linear-gradient(136deg,#99d337,#83b928)}.edit-top .edit-logo[data-v-d2e8d1ac]{position:absolute;right:0;left:0;top:%?64?%;width:%?208?%;height:%?88?%;margin:0 auto}.edit-box[data-v-d2e8d1ac]{width:%?702?%;background-color:#fff;margin:0 auto;border-radius:16px;position:relative;margin-top:%?-150?%}.edit-box .item[data-v-d2e8d1ac]{height:%?108?%;line-height:%?108?%}.edit-box .edit-user[data-v-d2e8d1ac]{display:block;width:%?104?%;height:%?104?%;margin:0 auto;border-radius:50%}.edit-box .edit-title[data-v-d2e8d1ac]{margin-top:%?-2?%}.edit-box uni-input[data-v-d2e8d1ac],\n.edit-box uni-picker[data-v-d2e8d1ac],\n.edit-box .view-picker[data-v-d2e8d1ac]{height:100%;line-height:%?108?%;padding-right:%?24?%}.textarea-edit uni-textarea[data-v-d2e8d1ac]{width:100%;height:%?320?%;background:#f6f7f9;border-radius:%?16?%;padding:%?24?%}.textarea-edit .content[data-v-d2e8d1ac]{position:relative}.textarea-edit .content .num[data-v-d2e8d1ac]{height:%?40?%;line-height:%?20?%;position:absolute;bottom:%?20?%;right:%?20?%;background-color:#fff;padding:%?10?%;border-radius:%?20?%}.edit-btn[data-v-d2e8d1ac]{width:%?686?%;height:%?88?%;background:-webkit-linear-gradient(135deg,#7ed04c,#46c171);background:linear-gradient(315deg,#7ed04c,#46c171);box-shadow:0 %?2?% %?30?% rgba(131,185,40,.2);border-radius:%?49?%}.img-icon[data-v-d2e8d1ac]{width:%?32?%;height:%?32?%}body.?%PAGE?%[data-v-d2e8d1ac]{background:#f6f7f9}",""]),t.exports=e},4566:function(t,e,i){"use strict";var a=i("a32b"),n=i.n(a);n.a},"760e":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={uImage:i("777c").default,wPicker:i("8aed").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"edit-data"},[a("v-uni-view",{staticClass:"edit-top"},[a("v-uni-image",{staticClass:"bg-edit",attrs:{src:i("d098"),mode:"aspectFill"}}),a("v-uni-image",{staticClass:"edit-logo",attrs:{src:i("6241"),mode:"aspectFill"}})],1),a("v-uni-form",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.formSubmit.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"padding-sm edit-box"},[a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}},[a("u-image",{staticClass:"edit-user",attrs:{width:"104rpx",height:"104rpx","border-radius":"50%",src:t.head_img||t.thumb,mode:"aspectFill","lazy-load":!0}})],1),a("v-uni-view",{staticClass:"flex solid-bottom item"},[a("v-uni-text",{staticClass:"text-lg text-bold edit-title"},[t._v("昵称")]),a("v-uni-input",{staticClass:"uni-input flex-sub text-lg text-right",attrs:{type:"text",placeholder:"请填写昵称",name:"user_nickname",maxlength:"10"},model:{value:t.user_nickname,callback:function(e){t.user_nickname=e},expression:"user_nickname"}}),a("v-uni-label",{staticClass:"cuIcon-right text-bf text-lg visibility-hidden"})],1),a("v-uni-label",{staticClass:"flex solid-bottom item"},[a("v-uni-text",{staticClass:"text-lg text-bold edit-title"},[t._v("性别")]),a("v-uni-picker",{staticClass:"flex-sub text-lg text-right",attrs:{value:t.sexIndex,range:t.sex,name:"sex"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindPickerChange.apply(void 0,arguments)}}},[t.sexIndex>0?a("v-uni-text",[t._v(t._s(t.sex[t.sexIndex]))]):a("v-uni-text",{staticClass:"text-grey"},[t._v("请选择性别")])],1),a("v-uni-text",{staticClass:"cuIcon-right text-bf text-lg",attrs:{for:"sex"}})],1),a("v-uni-view",{staticClass:"flex solid-bottom item"},[a("v-uni-text",{staticClass:"text-lg text-bold edit-title"},[t._v("出生")]),a("v-uni-picker",{staticClass:"flex-sub text-lg text-right",attrs:{end:t.yearEnd,value:t.dateValue,mode:"date",fields:"year",name:"birth_year"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindDateChange.apply(void 0,arguments)}}},["请选择年份"==t.dateValue?a("v-uni-text",{staticClass:"text-grey"},[t._v(t._s(t.dateValue))]):a("v-uni-text",[t._v(t._s(t.dateValue))])],1),a("v-uni-text",{staticClass:"cuIcon-right text-bf text-lg"})],1),a("v-uni-view",{staticClass:"flex solid-bottom item"},[a("v-uni-text",{staticClass:"text-lg text-bold edit-title"},[t._v("地区")]),a("v-uni-view",{staticClass:"flex-sub text-lg text-right view-picker",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggleTab()}}},["请选择省份"==t.name?a("v-uni-text",{staticClass:"text-grey"},[t._v(t._s(t.name))]):a("v-uni-text",[t._v(t._s(t.name))])],1),a("v-uni-text",{staticClass:"cuIcon-right text-bf text-lg"})],1),a("v-uni-view",{staticClass:"textarea-edit"},[a("v-uni-view",{staticClass:"padding-top padding-bottom-sm"},[a("v-uni-text",{staticClass:"text-lg text-bold edit-title"},[t._v("简介")])],1),a("v-uni-view",{staticClass:"content"},[a("v-uni-textarea",{attrs:{maxlength:"200",placeholder:"多行文本输入框"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.textareaAInput.apply(void 0,arguments)}},model:{value:t.about,callback:function(e){t.about=e},expression:"about"}}),a("v-uni-view",{staticClass:"num"},[t._v(t._s(t.about.length)+"/200")])],1)],1),a("v-uni-view",{staticClass:"flex align-center justify-between"},[a("v-uni-view",{staticClass:"padding-top-sm text-blu flex align-center"},[a("v-uni-image",{staticClass:"img-icon margin-right-xs",attrs:{src:i("73c5"),mode:"aspectFill"}}),t._v("插入图片")],1),a("v-uni-view",{staticClass:"action"},[t._v(t._s(t.imgList.length)+"/4")])],1),a("v-uni-view",{staticClass:"cu-form-group padding-0 padding-top-sm"},[a("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[t._l(t.imgList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"bg-img",attrs:{"data-url":t.imgList[i]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ViewImage.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:t.imgList[i],mode:"aspectFill"}}),a("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":i},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.DelImg.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),t.imgList.length<4?a("v-uni-view",{staticClass:"solids",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChooseImagePhotos.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):t._e()],2)],1)],1),a("v-uni-view",{staticClass:"padding-tb-lg"},[a("v-uni-button",{staticClass:"edit-btn",attrs:{loading:t.isLoading,formType:"submit",type:"primary"}},[t._v("完成编辑")])],1)],1),a("w-picker",{ref:"region",attrs:{mode:"region",defaultVal:t.defaultVal,hideArea:!0,themeColor:"#007aff"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirm.apply(void 0,arguments)}}})],1)},s=[]},8311:function(t,e,i){"use strict";i.r(e);var a=i("bd52"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},a32b:function(t,e,i){var a=i("426a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("41395471",a,!0,{sourceMap:!1,shadowMode:!1})},bd52:function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("99af"),i("c975"),i("a15b"),i("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("8aed")),s=i("e4fd"),d=null,o={data:function(){return{isLoading:!1,userInfo:{},head_img:"",head_img_id:"",user_nickname:"",sexIndex:0,sex:["请选择性别","男","女"],dateValue:"请选择年份",mobile:"",name:"请选择省份",mode:"region",defaultVal:[1],city1:[],thumb:t.SYSTEM_CONFIG.defaultAvatar,about:"",imgList:[],imgList_id:[],yearEnd:"2020"}},components:{wPicker:n.default},onLoad:function(t){var e=this,i={};this.userInfo=i,this.head_img=i.head_img?i.head_img:"",this.user_nickname=i.user_nickname,this.sexIndex=i.sex?i.sex:0,this.dateValue=i.birth_year?i.birth_year:"请选择年份",this.mobile=i.mobile,this.name=i.address?i.address:"请选择省份",this.defaultVal=i.address?i.address_code:[1],uni.$on("uAvatarCropper",(function(t){e.uploadUserImg(t)})),this.yearEnd=(new Date).getFullYear()+""},onUnload:function(){uni.$off("uAvatarCropper")},methods:{toggleTab:function(){this.$refs[this.mode].show()},bindPickerChange:function(t){this.sexIndex=t.detail.value},bindDateChange:function(t){this.dateValue=t.detail.value},textareaAInput:function(t){this.about=t.detail.value},onConfirm:function(t){var e=t.obj,i=e.province,a=(e.city,e.area,[i.label]),n=[i.value];this.name=a[0],this.city1=a,this.defaultVal=n},chooseImage:function(){uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){uni.navigateTo({url:'../../fu-templete/pages/mine-template/u-avatar-cropper/u-avatar-cropper?destWidth=150&rectWidth=250&fileType="jpg"&myImgUrl='+t.tempFilePaths[0],animationDuration:0})}})},ChooseImagePhotos:function(){var t=this;uni.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album"],success:function(e){if(t.imgList.length+e.tempFilePaths.length>4)return t.$message.info("最多上传4张图片");uni.showLoading(),new s.UploadImage(e.tempFilePaths,{complete:function(e){if(e.length)for(var i=0;i<e.length;i++)t.imgList=t.imgList.concat(e[i].path),t.imgList_id=t.imgList_id.concat(e[i].id),i==e.length&&uni.hideLoading()}})}})},DelImg:function(t){var e=this;uni.showModal({title:"提示",content:"确定要删除这张照片吗？",cancelText:"取消",confirmText:"确定",success:function(i){i.confirm&&(e.imgList.splice(t.currentTarget.dataset.index,1),e.imgList_id.splice(t.currentTarget.dataset.index,1))}})},ViewImage:function(t){uni.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},formSubmit:function(e){var i=this;this.isLoading||(d&&clearTimeout(d),d=setTimeout((function(){var a=e.detail.value;a.head_img=i.head_img_id,a.birth_year=-1!=a.birth_year.indexOf("选择")?"":a.birth_year,a.province=-1!=i.name.indexOf("选择")?"":i.name,a.introduction=i.about?i.about:"",a.introduction_img=i.imgList_id.length>0?i.imgList_id.join(","):"";var n=i.doValidate(a);n?i.$message.info(n):(t.loginInfo=a,uni.navigateTo({url:"/pages/member/interest"}))}),300))},doValidate:function(t){return t.user_nickname?t.user_nickname.length>10?"请检查您的昵称(最多10个字符)":0==t.sex?"请选择您的性别":t.birth_year?-1!=this.name.indexOf("选择")?"请选择省份":"":"请选择您的出生年份":"请输入您的用户昵称"},uploadUserImg:function(t){uni.showLoading();var e=this;new s.UploadImage([t],{complete:function(t){uni.hideLoading(),t.length&&(e.head_img=t[0].path,e.head_img_id=t[0].id)}})}}};e.default=o}).call(this,i("c8ba"))}}]);